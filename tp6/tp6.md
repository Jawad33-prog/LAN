# ☀️ Prouvez que...

## une machine du LAN1 peut joindre internet (ping un nom de domaine)

```powershell
[jawad@dhcp ~]$ ping google.com
PING google.com (142.251.37.174) 56(84) bytes of data.
64 bytes from mrs09s14-in-f14.1e100.net (142.251.37.174): icmp_seq=1 ttl=111 time=20.8 ms
...
```

## une machine du LAN2 peut joindre internet (ping nom de domaine)

```powershell
[jawad@web ~]$ ping google.com
PING google.com (142.250.200.238) 56(84) bytes of data.
64 bytes from mrs08s18-in-f14.1e100.net (142.250.200.238): icmp_seq=1 ttl=111 time=18.8 ms
...
```

## une machine du LAN1 peut joindre une machine du LAN2 (ping une adresse IP)

```powershell
[jawad@dhcp ~]$ ping 10.6.2.11
PING 10.6.2.11 (10.6.2.11) 56(84) bytes of data.
64 bytes from 10.6.2.11: icmp_seq=1 ttl=63 time=2.63 ms
...
```

## le client a bien récupéré une adresse IP en DHCP

```powershell
[jawad@client1 ~]$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:51:dd:51 brd ff:ff:ff:ff:ff:ff
    inet 10.6.1.37/24 brd 10.6.1.255 scope global dynamic noprefixroute enp0s3
       valid_lft 281sec preferred_lft 281sec
    inet6 fe80::a00:27ff:fe51:dd51/64 scope link
       valid_lft forever preferred_lft forever
```

## vous avez bien 1.1.1.1 en DNS

```powershell
[jawad@client1 ~]$ cat /etc/resolv.conf
# Generated by NetworkManager
search tp6.b1
nameserver 1.1.1.1
```

## vous avez bien la bonne passerelle indiquée

```powershell
[jawad@client1 ~]$ ip route show
default via 10.6.1.254 dev enp0s3 proto dhcp src 10.6.1.37 metric 100
10.6.1.0/24 dev enp0s3 proto kernel scope link src 10.6.1.37 metric 100
```

## que ça ping un nom de domaine public sans problème magueule

```powershell
[jawad@client1 ~]$ ping google.com
PING google.com (142.250.200.206) 56(84) bytes of data.
64 bytes from mrs08s17-in-f14.1e100.net (142.250.200.206): icmp_seq=1 ttl=112 time=19.5 ms
```

## déterminer sur quel port écoute le serveur NGINX

```powershell
[jawad@web ~]$ sudo ss -lnpt | grep 80
LISTEN 0      511          0.0.0.0:80        0.0.0.0:*    users:(("nginx",pid=1638,fd=6),("nginx",pid=1637,fd=6))
LISTEN 0      511             [::]:80           [::]:*    users:(("nginx",pid=1638,fd=7),("nginx",pid=1637,fd=7))
```

## ouvrir ce port dans le firewall

```powershell
[jawad@web ~]$ sudo firewall-cmd --zone=public --add-port=80/tcp --permanent
success
[jawad@web ~]$ sudo firewall-cmd --reload
success
```

```html
[jawad@client1 ~]$ curl http://10.6.2.11
<!doctype html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>HTTP Server Test Page powered by: Rocky Linux</title>
    <style type="text/css">
      /*<![CDATA[*/

      html {
        height: 100%;
        width: 100%;
      }
        body {
  background: rgb(20,72,50);
  background: -moz-linear-gradient(180deg, rgba(23,43,70,1) 30%, rgba(0,0,0,1) 90%)  ;
  background: -webkit-linear-gradient(180deg, rgba(23,43,70,1) 30%, rgba(0,0,0,1) 90%) ;
  background: linear-gradient(180deg, rgba(23,43,70,1) 30%, rgba(0,0,0,1) 90%);
  background-repeat: no-repeat;
  background-attachment: fixed;
...
```

## déterminer sur quel(s) port(s) écoute le service BIND9

```powershell
[jawad@dns ~]$ sudo ss -lnput | grep 53
udp   UNCONN 0      0          10.6.2.12:53        0.0.0.0:*    users:(("named",pid=1908,fd=24))
udp   UNCONN 0      0          127.0.0.1:53        0.0.0.0:*    users:(("named",pid=1908,fd=21))
udp   UNCONN 0      0              [::1]:53           [::]:*    users:(("named",pid=1908,fd=26))
tcp   LISTEN 0      10         10.6.2.12:53        0.0.0.0:*    users:(("named",pid=1908,fd=25))
tcp   LISTEN 0      4096       127.0.0.1:953       0.0.0.0:*    users:(("named",pid=1908,fd=28))
tcp   LISTEN 0      10         127.0.0.1:53        0.0.0.0:*    users:(("named",pid=1908,fd=22))
tcp   LISTEN 0      10             [::1]:53           [::]:*    users:(("named",pid=1908,fd=27))
tcp   LISTEN 0      4096           [::1]:953          [::]:*    users:(("named",pid=1908,fd=29))
```

## Vous devriez pouvoir visiter http://web.tp6.b1 avec le navigateur, ça devrait fonctionner sans aucune autre action.

```powershell
[jawad@client2 ~]$ curl http://web.tp6.b1
<!doctype html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>HTTP Server Test Page powered by: Rocky Linux</title>
    <style type="text/css">
      /*<![CDATA[*/

      html {
        height: 100%;
        width: 100%;
      }
        body {
...
```